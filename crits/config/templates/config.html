{% extends "base.html" %}
{% load url from future %}
{% block title %}CRITs Configuration{% endblock %}
{% block javascript_includes %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/config.js"></script>
    <script type="text/javascript">
		var config = {
			    tabs: {
			        name: 'tabs',
			        active: 'tab1',
			        tabs: [
                        { id: 'CRITsTab', caption: 'CRITs Configuration' },
			            { id: 'generalTab', caption: 'General' },
			            { id: 'LDAP', caption: 'LDAP Settings' },
			            { id: 'downloadTab', caption: 'Downloading' },
			            { id: 'securityTab', caption: 'Security' },
                        { id: 'servicesTab', caption: 'Services' },
                        { id: 'loggingTab', caption: 'Logging' }
			        ],
			        onClick: function (event) {
			            $('#tabsWrapper .tab').hide();
			            $('#tabsWrapper #' + event.target).show();
			        }
			    }
			}
		$(function () {
            $('#tabs').w2tabs(config.tabs);
            if(document.location.hash)
            	$(document.location.hash).show();
            else
                $('#CRITsTab').show();
        });
		//above is for tabbing
		
		//below is for side bar
		var currentTab = "generalTab2";
		$(function () {
		    $('#sidebar').w2sidebar({
		        name: 'sidebar',
		        nodes: [ 
		            { id: 'system', text: 'System', img: 'icon-folder', expanded: true, group: true,
		              nodes: [ { id: 'generalTab2', text: 'General'},
		                       { id: 'CRITsTab2', text: 'CRITs'},
		                       { id: 'LDAP2', text: 'LDAP Settings'},
		                       { id: 'securityTab2', text: 'Security'},
                               { id: 'downloadTab2', text: 'Downloading'},
                               { id: 'servicesTab2', text: 'Services'},
                               { id: 'loggingTab2', text: 'Logging'}
		                     ]
		            },
		            { id: 'items', text: 'Items', img: 'icon-folder', group: true},
		            { id: 'users', text: 'Users', img: 'icon-folder', group: true},
		            { id: 'services', text: 'Services', img: 'icon-folder', group: true},
		            { id: 'Audit Log', text: 'Audit Log', img: 'icon-folder', group: true}
		        ]
		    });
		    
		    w2ui.sidebar.on('*', function (event) {
		        console.log('Event: ' + event.type + ' Target: ' + event.target);
		        console.log(event);
		        var target = event.target;
		        var targetElem = $('#'+target)[0];
		        if(target != currentTab && targetElem != null) {
		            w2utils.transition($('#'+currentTab)[0], targetElem, "pop-in");
		            currentTab = target;
		        }
		        
		    });
		});
	</script>
{% endblock %}
{% block content %}
    <style>
	    #config_results {
	        color: #ff0000;
	    }
	    .tab {
	        width: 100%;
	        border: 1px solid silver;
	        border-top: 0px;
	        display: none;
	        padding: 10px;
	        overflow: auto;
	    }
	    #break {
	       height:1200px;
	       width:100%;
	    }
	    .container {
		    padding: 10px; 
		    overflow: hidden;
		}
		.box {
		    background-color: #fafafa; 
		    padding: 4px; 
		    width: 89%;
		    height:800px;
		    position: absolute; 
		    right:0;
		    border: 1px solid silver;
		}
		#sidebar {
            position:absolute;
            height: 800px;
            left:0;
            width: 10%;
		}
		#wrapper {
		  width:100%;
		}
	</style>
	
	
	<form id="config_form" action='{% url 'crits.config.views.modify_config' %}' method='POST'>
        <div id='tabsWrapper'>
            <div id="tabs" style="width: 100%;"></div>
            <div id="generalTab" class='tab'>
               <table>{{ config_general_form.as_table }}</table>
            </div>
            <div id="CRITsTab" class='tab'>
               <table>{{ config_CRITs_form.as_table }}</table>
            </div>
            <div id="LDAP" class='tab'>
               <table>{{ config_LDAP_form.as_table }}</table>
            </div>
            <div id="securityTab" class='tab'>
               <table>{{ config_security_form.as_table }}</table>
            </div>
            <div id="downloadTab" class='tab'>
               <table>{{ config_download_form.as_table }}</table>
            </div>
            <div id="servicesTab" class='tab'>
               <table>{{ config_services_form.as_table }}</table>
            </div>
            <div id="loggingTab" class='tab'>
               <table>{{ config_logging_form.as_table }}</table>
            </div>
         </div>   
         <div id="config_sections">
            <input id="config_form_submit" class="form_submit_button" type="submit" name="submit" value="Submit"></input>
            <br /><br />
            <div id="config_results"></div>
        </div>
    </form>
	
	<div id='break'></div>
	
    <div id='wrapper'>
        <div id="sidebar" ></div>
        <div class='container'>
            <div id='CRITsTab2' class='box'>
               <table>{{ config_CRITs_form.as_table }}</table>
            </div>  
            <div id='generalTab2' class='box'>
               <table>{{ config_general_form.as_table }}</table>
            </div>
            <div id="LDAP2" class='box'>
               <table>{{ config_LDAP_form.as_table }}</table>
            </div>
            <div id="securityTab2" class='box'>
               <table>{{ config_security_form.as_table }}</table>
            </div>
            <div id="downloadTab2" class='box'>
               <table>{{ config_download_form.as_table }}</table>
            </div>
            <div id="servicesTab2" class='box'>
               <table>{{ config_services_form.as_table }}</table>
            </div>
            <div id="loggingTab2" class='box'>
               <table>{{ config_logging_form.as_table }}</table>
            </div
        </div>
    </div>
	
	
	
	
	
	
{% endblock %}

